# Contributor: Markus Golser <elmargol@googlemail.com>
# Contributor: mosra <mosra@centrum.cz>

pkgname=krita-svn
pkgver=1102749
pkgrel=1
arch=('i686' 'x86_64')
pkgdesc="Krita is a painting and image editing application for KOffice"
url="http://www.krita.org"
depends=('kdelibs' 'kdebase-runtime' 'kdepimlibs' 'lcms' 'eigen' 'exiv2>=0.16' 'qimageblitz')
conflicts=('koffice-krita')
provides=('koffice-krita')
makedepends=('subversion' 'cmake' 'automoc4')
source=()
md5sums=()
license=('GPL')

_svntrunk=svn://anonsvn.kde.org/home/kde/trunk/
_svnmod=koffice

build() {
  cd $startdir/src

  svn co $_svntrunk$_svnmod $_svnmod

  mkdir -p build
  cd build

  cmake ../$_svnmod \
  	-Wno-dev \
 	-DCMAKE_BUILD_TYPE=Release \
 	-DCMAKE_INSTALL_PREFIX=/usr \
	-DBUILD_doc=off \
	-DBUILD_generic_wrapper=off \
	-DBUILD_karbon=off \
	-DBUILD_kchart=off \
	-DBUILD_kdgantt=off \
	-DBUILD_kexi=off \
	-DBUILD_kformula=off \
	-DBUILD_kspread=off \
	-DBUILD_kivio=off \
	-DBUILD_tools=off \
	-DBUILD_kounavail=off \
	-DBUILD_kplato=off \
	-DBUILD_kpresenter=off \
	-DBUILD_kword=off \
	-DBUILD_libkowmf=on \
	-DBUILD_musicshape=off \
	-DBUILD_krita=on || return 1
  make || return 1
  make DESTDIR=${pkgdir} install || return 1
}
